# CVE Demo

This demo should help get you started developing with Pixel Streaming in UE5.

## Installation

### Install Dependencies

- @cve-ts/controls
- @cve-ts/player

```cmd
npm install @cve-ts/controls @cve-tsplayer 
```

### Prepare for Custom Elements

#### Develop in Vue3

```js
// vite.config.ts
import { defineConfig } from 'vite'
import vue from '@vitejs/plugin-vue'

// https://vitejs.dev/config/
export default defineConfig({
  plugins: [
    vue({
      template: {
        compilerOptions: {
          // 将所有带短横线的标签名都视为自定义元素
          isCustomElement: (tag) => tag.indexOf('-') !== -1
        }
      }
    }),
  ],
})
```

#### Define Custom Elements

```js
// main.ts
import { definePlayer } from '@cve-ts/player'

definePlayer()
```

## Usage

```html
<!-- html/template -->
<cve-player
  application-name="HdecUnrealPinglu"
  id="cve-player"
  level-name="Madao"
  scene-name="Base"
  :use-mic="false"
  :volume="0.3"
  @connect="render"
  @text="log"
>
</cve-player>
```

```js
// script
import { CameraControl, type CameraData } from '@cve-ts/controls'

const camera = new CameraControl()

const render = async (evt: CustomEvent<number>) => {
  console.log('connect ===> ', evt.detail)

  setTimeout(() => {
    const data: CameraData = {
      Location: [-150933.81522, -23069.396282, 25299.628117],
      Rotation: [0, -25.206932, -68.69767],
      ArmLength: 182103.671875,
    }
    camera.flyTo(data, 3)
  }, 1000 * 3)
}

const log = (evt: CustomEvent<string>) => {
  console.log('text ===> ', evt.detail)
}
```

```css
/* style */
cve-player {
  height: 100vh;
  width: 100vw;
}
```

## Player

Player is web component (custom element) we could use.

[@cve-ts/player - npm (npmjs.com)](https://www.npmjs.com/package/@cve-ts/player)

## Controls

Here some controls we could use.

[@cve-ts/controls - npm (npmjs.com)](https://www.npmjs.com/package/@cve-ts/controls)

## Features

Here some features we could use.

[@cve-ts/features - npm (npmjs.com)](https://www.npmjs.com/package/@cve-ts/features)
